name: CI

on:
  push:
    branches: [main]
  pull_request:

jobs:
  proof-manifest:
    name: proof-manifest
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: enforce LF
        shell: bash
        run: |
          git config --global core.autocrlf false
      - name: proof-manifest
        shell: pwsh
        run: |
          ./scripts/ci_proof_manifest.ps1
  required-aggregate:
    needs: [proof-manifest]
    runs-on: ubuntu-latest
    steps:
      - name: required (aggregate)
        shell: pwsh
        run: |
          "required PASS" | Out-File -FilePath  -Append -Encoding utf8
