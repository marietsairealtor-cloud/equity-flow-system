PROOF_HEAD=d705b5dc64f30ce31e380a92f9ea277feb0705b5
PROOF_SCRIPTS_FILES=scripts/ci_proof_commit_binding.ps1
PROOF_SCRIPTS_FILE_SHA256=scripts/ci_proof_commit_binding.ps1:6f587ea8a5c11be7797cabd6ad10df93383c109a3612a89f356f2b3dd65d9eba
PROOF_SCRIPTS_HASH=ce0178bfa8774469ee797cbb450f48bda03bc02d66100de19ea4e5ea96955ab3
6.1 GREENFIELD BASELINE MIGRATIONS — LOCAL EPHEMERAL REPLAY PROOF
PROOF_HEAD: 8e918c8f688fa951aba071dcd8eb1b48bb842f0a

=== STEP 1: ephemeral DB reset (supabase db reset) ===
Resetting local database...
Recreating database...
Initialising schema...
Seeding globals from roles.sql...
Applying migration 20260219000000_baseline_tenants.sql...
Applying migration 20260219000001_baseline_tenant_memberships.sql...
Applying migration 20260219000002_baseline_user_profiles.sql...
Applying migration 20260219000003_baseline_deals.sql...
Applying migration 20260219000004_default_acl_lockdown.sql...
Applying migration 20260219000005_privilege_remediation.sql...
Applying migration 20260219000006_rls_colocation_corrective.sql...
WARN: no files matched pattern: supabase/seed.sql
Restarting containers...
Finished supabase db reset on branch pr/6.1-greenfield-baseline-migrations.

=== STEP 2: migration replay confirmation ===
DB container: supabase_db_equity-flow-system
 20260219000000
 20260219000001
 20260219000002
 20260219000003
 20260219000004
 20260219000005
 20260219000006

=== STEP 3: deterministic schema dump via npm run handoff ===

> equity-flow-system@0.0.0 handoff
> powershell -NoProfile -ExecutionPolicy Bypass -File scripts\handoff.ps1

Dumping schemas from local database...
Dumped schema to <redacted-local-path>/generated/schema.sql.
Wrote generated/schema.sql (schemas: public)
Wrote generated/contracts.snapshot.json (deterministic)
CONTRACTS LINT OK
MUST-CONTAIN OK
Wrote docs/handoff_latest.txt

=== STEP 4: git diff --exit-code generated/schema.sql ===

git diff exit code: 0

Zero diff result: PASS
RESULT=PASS

=== ENFORCEMENT PROOF: handoff exits non-zero when migrations changed and no proof log exists ===
New-Item supabase/migrations/99999999999999_test_enforcement.sql (dummy migration, staged only)
git add supabase/migrations/99999999999999_test_enforcement.sql
npm run handoff

> equity-flow-system@0.0.0 handoff
> powershell -NoProfile -ExecutionPolicy Bypass -File scripts\handoff.ps1

Dumping schemas from local database...
Dumped schema to <redacted-local-path>/generated/schema.sql.
Wrote generated/schema.sql (schemas: public)
Wrote generated/contracts.snapshot.json (deterministic)
CONTRACTS LINT OK
MUST-CONTAIN OK
Wrote docs/handoff_latest.txt
handoff exit code: 0
Enforcement result: FAIL — handoff did not block